{
  "name": "Daytona.io Dev Container",
  "build": {
    "dockerfile": "Dockerfile"
  },
  "features": {
    "docker-in-docker": "latest",
    "node": "lts"
  },
  "extensions": [
    "ms-python.python",
    "esbenp.prettier-vscode",
    "dbaeumer.vscode-eslint",
    "eamodio.gitlens",
    "ms-azuretools.vscode-docker"
  ],
  "settings": {
    "python.pythonPath": "/workspace/backend/venv/bin/python",
    "editor.formatOnSave": true,
    "eslint.validate": [
      "javascript",
      "javascriptreact",
      "typescript",
      "typescriptreact"
    ],
    "terminal.integrated.shell.linux": "/bin/bash"
  },
  "mounts": [
    "source=${localWorkspaceFolder}/frontend,target=/workspace/frontend,type=bind,consistency=cached",
    "source=${localWorkspaceFolder}/backend,target=/workspace/backend,type=bind,consistency=cached"
  ],
  "forwardPorts": [3000, 8000, 7700],
  "workspaceFolder": "/workspace",
  "postStartCommand": [
    "docker ps | grep meilisearch || docker run -d --name meilisearch -p 7700:7700 getmeili/meilisearch:v1.2",
    "source /workspace/backend/venv/bin/activate && uvicorn backend.main:app --host 0.0.0.0 --port 8000 &",
    "npm run dev --prefix /workspace/frontend"
  ],
  "customizations": {
    "vscode": {
      "extensions": [
        "ms-python.python",
        "esbenp.prettier-vscode",
        "dbaeumer.vscode-eslint",
        "eamodio.gitlens",
        "ms-azuretools.vscode-docker"
      ],
      "settings": {
        "python.pythonPath": "/workspace/backend/venv/bin/python",
        "editor.formatOnSave": true,
        "eslint.validate": [
          "javascript",
          "javascriptreact",
          "typescript",
          "typescriptreact"
        ]
      }
    }
  },
  "containerUser": "vscode",
  "shutdownAction": "none"
}
